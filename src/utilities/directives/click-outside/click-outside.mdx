import { Canvas, Story } from "@storybook/addon-docs"
import { Alert } from "../../../../docs/components/Alert"

# Click outside
After adding this directive you can call some function by clicking outside of element

## How to use
* `v-click-outside="{ handler: functionName() }"` - bind function
* `v-click-outside="{
  handler: functionName(),
  isActive: boolean
}"` - active/disable directive

<Alert>
  <p>Click outside directive use <code>beforeMount</code> hook to <code>addEventListener</code> with callback.
  But in some case e.g. <code>UiDropdown</code> you want to <code>addEventListener</code> only when is open (to close Dropdown).
  For that you can use isActive optional parameter.</p>
</Alert>

```html
  <UiButton @click="toggleVisibility"></UiButton>
  <UiPopover
    v-if="visibility"
    v-click-outside="{
      handler,
      isActive,
    }"
  >
    ...
  </UiPopover>
```
or

```html
<template>
  <UiButton @click="toggleVisibility"></UiButton>
  <UiPopover
    v-if="visibility"
    v-click-outside="clickOutsideOptions"
  >
    ...
  </UiPopover>
<template>

<script setup lang="ts">
import { clickOutside as vClickOutside } from '@infermedica/component-library/directives';
import type { VClickOutsideOptions } from '@infermedica/component-library/directives';

const clickOutsideOptions: VClickOutsideOptions = computed(() => ({
  handler: (event) => toggleVisibility(event),
  isActive: boolean,
}));
</script>
```

## Used
* [Datepicker](/docs/organisms-datepicker--common)
* [Dropdown](/docs/molecules-dropdown--with-content-slot)

## Stories
### With directive
<Canvas>
  <Story id="utilities-directives-click-outside--with-directive"/>
</Canvas>

### With event listener switcher
<Canvas>
  <Story id="utilities-directives-click-outside--with-directive-switcher"/>
</Canvas>

### Without directive
<Canvas>
  <Story id="utilities-directives-click-outside--without-directive"/>
</Canvas>
